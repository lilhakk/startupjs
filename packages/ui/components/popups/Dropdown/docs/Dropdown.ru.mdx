import { useState } from 'react'
import { View, Text, Dimensions } from 'react-native'
import Dropdown from '../'
import Icon from '../../../Icon'
import Row from '../../../Row'
import Div from '../../../Div'
import Span from '../../../typography/Span'
import Br from '../../../Br'
import Avatar from '../../../Avatar'
import {
  faSort,
  faEllipsisV,
  faPencilAlt,
  faTrashAlt,
  faAngleDown,
  faCog
} from '@fortawesome/free-solid-svg-icons'

# Dropdown
Всплывающие меню. Адаптируемое в зависимости от расширения.
```jsx
import { Dropdown } from '@startupjs/ui'
```

## Инициализация

Перед использованием нужно настроить [Portal](/docs/components/Portal)

## Простой пример
В функцию onChange приходит значение нажатого чилдрена.
```jsx example
const captionStyle = {
  width: 200, paddingLeft: 16, paddingRight: 16, backgroundColor: '#ddd',
  paddingTop: 8, paddingBottom: 8, alignItems: 'center',
  justifyContent: 'space-between', borderRadius: 8,
  flexDirection: 'row'
}

const [sort, setSort] = useState('')

const options= [
  { value: 'popular', label: 'Popular' },
  { value: 'brand', label: 'Brand' },
  { value: 'name', label: 'Name' }
]

return pug`
  Dropdown(
    value=sort
    style=captionStyle
    options=options
    onChange=v=> setSort(v)
  )
    Span(style={ marginRight: 8 }) Sort by #{sort || '...'}
    Icon(icon=faAngleDown)
`
```

## Иконки в пунктах списка
```jsx example
const captionStyle = {
  padding: 8, backgroundColor: '#ddd', width: 36, height: 36,
  justifyContent: 'center', alignItems: 'center',
  borderRadius: 48
}

const [sort, setSort] = useState('')

const options = [
  { icon: faPencilAlt, value: 'edit', label: 'Edit' },
  { icon: faTrashAlt, value: 'delete', label: 'Delete' }
]

return pug`
  Dropdown(
    value=sort
    style=captionStyle
    options=options
    onChange=v=> setSort(v)
  )
    Icon(icon=faCog)
`
```

## Стилизация
```jsx example
const captionStyle = {
  padding: 8, backgroundColor: '#ddd', width: 36, height: 36,
  justifyContent: 'center', alignItems: 'center',
  borderRadius: 48
}

const contentStyle = Dimensions.get('window').width < 780
  ? { maxHeight: 160 }
  : { maxHeight: 100 }

const [value, setValue] = useState('')

const options = [
  { value: 'java', label: 'Java' },
  { value: 'golang', label: 'Golang' },
  { value: 'js', label: 'JavaScript' },
  { value: 'python', label: 'Python' },
  { value: 'csharp', label: 'C#' },
  { value: 'cpp', label: 'C++' }
]

return pug`
  Dropdown(
    value=value
    options=options
    style=captionStyle
    contentStyle=contentStyle
    onChange=v=> setValue(v)
  )
    Icon(icon=faCog)
`
```

Есть 2 типа поведения Dropdown, для десктопного и мобильного разрешения
На десктопе используется компонент [Popover](/docs/popups/Popover)
На мобильных экранах - [Drawer](/docs/popups/Drawer)
Чтобы правильно применять style для каждого варианта, можно использовать миксин `+tablet`:
```styl
.wrapper
  // Drawer styles
  +tablet()
    // Popover styles
```

## Кастомнизация (renderItem)
```jsx example
  const captionStyle = {
    padding: 8, backgroundColor: '#ddd', width: 36, height: 36,
    justifyContent: 'center', alignItems: 'center',
    borderRadius: 48
  }

  const itemStyle = {
    alignItems: 'center',
    padding: 8
  }

  const options = [
    {
      value: 'orange',
      label: 'Orange',
      image: 'https://riviste.newbusinessmedia.it/wp-content/uploads/sites/27/2013/12/Fotolia_11313277_M.jpg'
    },
    {
      value: 'grapefruit',
      label: 'Grapefruit',
      image: 'https://i.ndtvimg.com/mt/cooks/2014-11/grapefruit.jpg'
    },
    {
      value: 'lime',
      label: 'Lime',
      image: 'https://static.libertyprim.com/files/familles/lime-large.jpg'
    },
    {
      value: 'lemon',
      label: 'Lemon',
      image: 'https://i5.walmartimages.com/asr/b34574b9-0476-40d6-95b8-a54d0dd92bfb_1.5c2cf0cddcc03ee5aa1e181afe8be355.jpeg'
    },
    {
      value: 'mandarin',
      label: 'Mandarin',
      image: 'https://cdn.webshopapp.com/shops/72785/files/56492820/550x550x2/flavour-art-mandarin.jpg'
    }
  ]

  function renderItem (item, index, activeIndex) {
    return pug`
      Row(style=itemStyle)
        Avatar(size='s' src=item.image)
        Span(style={ marginLeft: 8 })= item.label
    `
  }

  return pug`
    Dropdown(
      style=captionStyle
      options=options
      renderItem=renderItem
    )
      Icon(icon=faCog)
  `
```

## Событие на item
```jsx example
const captionStyle = {
  padding: 8, backgroundColor: '#ddd', width: 36, height: 36,
  justifyContent: 'center', alignItems: 'center',
  borderRadius: 48
}

const contentStyle = Dimensions.get('window').width < 780
  ? { maxHeight: 160 }
  : { maxHeight: 100 }

const [value, setValue] = useState('')

const options = [
  { label: 'Java', action: ()=> alert('Java') },
  { label: 'Golang', action: ()=> alert('Golang') },
  { label: 'JavaScript', action: ()=> alert('JavaScript') }
]

return pug`
  Dropdown(
    options=options
    style=captionStyle
    contentStyle=contentStyle
  )
    Icon(icon=faCog)
`
```

## Переход по ссылке на item
```jsx example
const captionStyle = {
  padding: 8, backgroundColor: '#ddd', width: 36, height: 36,
  justifyContent: 'center', alignItems: 'center',
  borderRadius: 48
}

const contentStyle = Dimensions.get('window').width < 780
  ? { maxHeight: 100 }
  : { maxHeight: 100 }

const [value, setValue] = useState('')

const options = [
  { label: 'Home', to: '/' },
  { label: 'About', to: '/about' },
  { label: 'Contact', to: 'contact' }
]

return pug`
  Dropdown(
    options=options
    style=captionStyle
    contentStyle=contentStyle
  )
    Icon(icon=faCog)
`
```

## Позиция для Popover
- position: имеет 4 варианта положений (left, right, top, bottom)
- attachment: дополнительный параметр для смещения (start, center, end)

Массив placements - задает какие позиции можно использовать при автофиксе

## Так же
- drawerCancelLabel: задать имя кнопки отмены на iOS и Android
<Br lines={10} />
